<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>mypage</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">menu</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarColor03">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" href="bbslist.html">Home
            <span class="visually-hidden">(current)</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="bbslikelistfile.html">likeâ¤</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="bbsscraplistfile.html">scrapğŸ”—</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="mypage.html">mypage</a>
        </li>
      </ul>
          <a class="nav-link" href="login.html">log-out</a>
          <button type="button" id="withdrawal" class="btn btn-outline-light">Withdrawal
          </button>
   
    </div>
  </div>
</nav>
</head>
<body>


<div class="card border-primary mb-3" style="max-width: 30rem;">
  <div class="card-header">íšŒì› ì •ë³´ ì¡°íšŒ ë° ìˆ˜ì •</div>
  <div class="card-body">
    <h4 class="card-title">ë‹¹ì‹ ì˜ í˜¸ê°ë„</h4>
    <h4 class="card-title" id="likepoint"></h4>
    <p class="card-text">ê¸€ì„ ì‘ì„±í•˜ì—¬ ëˆ„ì ëœ í˜¸ê°ë„ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
  </div>
  
  <br><br>
	<button type="button" class="btn btn-outline-primary" id="mybbslist">ë‚´ê°€ ì‘ì„±í•œ ê¸€ ë³´ê¸°</button>  
<form id="memfrm"> 
<table class="table table-hover" border="1">
	<tr>
			<td>ì•„ì´ë””</td>
			<td>
			<input type="text" class="form-control" id="id" name="id" readonly="readonly" size="20" >
			</td>
	</tr>
	<tr>
			<td>ì´ë¦„</td>
			<td>
			<input type="text" class="form-control" id="name" name="name" readonly="readonly" size="20" >
			</td>
	</tr>
		<tr>
			<td>ì´ë©”ì¼</td>
			<td>
			<input type="text" class="form-control" id="email" name="email" placeholder="ì´ë©”ì¼" size="20" >
			</td>
	</tr>
<!-- 	<tr>
			<td>í˜¸ê°ë„</td>
			<td>
			<input type="text" id="likepoint2" readonly="readonly" size="20" >
			</td>
	</tr> -->
	<tr>
			<td>íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½</td>
			<td>
			<input type="password" class="form-control" id="pwd" name="pwd" placeholder="íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥" size="20">
			</td>
	</tr>
	<tr>
			<td>ë‹‰ë„¤ì„ ë³€ê²½</td>
			<td>
			<input type="text" class="form-control" id="nickname" name="nickname" placeholder="ë³€ê²½ ë‹‰ë„¤ì„ ì…ë ¥" size="20">
			</td>
	</tr>
		<tr>
			<td>í”„ë¡œí•„ ì‚¬ì§„</td>
			<td>
			<input type="text" class="form-control" id="profilpic" name="profilpic" placeholder="í”„ë¡œí•„ ì‚¬ì§„" size="20">
			</td>
	</tr>
		<tr>
			<td>í”„ë¡œí•„ ë©”ì„¸ì§€ ë³€ê²½</td>
			<td>
			<input type="text" class="form-control" id="profilmsg" name="profilmsg" placeholder="ë³€ê²½ ë©”ì„¸ì§€ ì…ë ¥" size="20">
			</td>
	</tr>
	
	<tr>
		<td colspan="2">
		<p>ì•„ì´ë””, ì´ë¦„ì€ ê°€ì…í•œ ë‹¹ì‹œ ì •ë³´ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.</p>
		
		</td>
	</tr>
	<tr>
		<td colspan="2">
		<button type="button" class="btn btn-outline-primary" id="updatemem">ë³€ê²½</button>
		</td>
	</tr>

</table>
</form> 
</div>

<script type="text/javascript">
let str = sessionStorage.getItem("login");	
let json = JSON.parse(str);
let id = JSON.parse(str).id; //ë¡œê·¸ì¸ í–ˆì„ë•Œ ì•„ì´ë”” ì •ë³´
//alert(id);

//íšŒì›íƒˆí‡´
$("#withdrawal").click(function () {
	location.href = "withdrawal.html";
	});
	
//ì‘ì„±í•œ ê¸€ ëª©ë¡ ë³´ê¸°
$("#mybbslist").click(function () {
	location.href = "mybbslist.html";
	});	

//íšŒì›ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
	$.ajax({
		url:"http://localhost:3000/detailMem",
		type:"get",
		data:{ "id":id },
		success:function(mem){
			//alert('success');
			$("#id").val(mem.id);
			$("#name").val(mem.name);	
			$("#email").val(mem.email);	
			$("#likepoint").html(mem.likepoint);	
			$("#pwd").val(mem.pwd);
			$("#nickname").val(mem.nickname);
			$("#profilpic").val(mem.profilpic);
			$("#profilmsg").val(mem.profilmsg);	
		},
		error:function(){
			alert('error');
		}
	});

		
//íšŒì›ì •ë³´ ìˆ˜ì •í•˜ê¸°
		$("#updatemem").on("click",function(){			
			$.ajax({
				url:"http://localhost:3000/updateMem",
				type:"get",
				data:{
					"id":id,
					"email":$("#email").val(), 
					"pwd":$("#pwd").val(), 
					"nickname":$("#nickname").val(),
					"profilmsg":$("#profilmsg").val(),
					"profilpic":$("#profilpic").val()					
				},
				success:function(data){
					if(data=="OK"){
						alert('ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
						location.href="mypage.html";
					}else{
						alert('ì •ë³´ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
					}
				},
				error:function(){
					alert('error');
				}
			});
			
		});
		
		
	
	
	

</script>


</body>
</html>